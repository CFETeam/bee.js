{"version":3,"sources":["node_modules/browserify/node_modules/browser-pack/_prelude.js","bee.js","src/bee.js","src/check-binding.js","src/class.js","src/component.js","src/directive.js","src/directives/attr.js","src/directives/class.js","src/directives/component.js","src/directives/content.js","src/directives/if.js","src/directives/index.js","src/directives/model.js","src/directives/on.js","src/directives/ref.js","src/directives/repeat.js","src/directives/style.js","src/dom-utils.js","src/env.js","src/eval.js","src/event-bind.js","src/parse.js","src/scope.js","src/token.js","src/utils.js","src/watcher.js"],"names":["f","exports","module","define","amd","g","window","global","self","this","Bee","e","t","n","r","s","o","u","a","require","i","Error","code","l","call","length",1,2,"setPrefix","newPrefix","prefix","tpl","props","isPlainObject","$tpl","defaults","$data","extend","constructor","$refs","$mixins","$el","$content","$isReplace","$parent","$root","$context","_watchers","_assignments","_relativePath","__links","_isRendered","mixins","concat","forEach","mixin","prop","propKey","hasOwnProperty","mergeProps","isObject","lifeCycles","utils","afterFn","bind","resolveTpl","$beforeInit","bee","checkBinding","walk","$afterInit","update","keyPath","data","keyPaths","$beforeUpdate","arguments","Object","keys","path","$update","$afterUpdate","tplEl","el","content","childNodes","domUtils","createContent","outerHTML","parentNode","replaceChild","appendChild","doc","document","Class","directive","Com","Watcher","dirs","scope","Dir","Directive","parseKeyPath","deepSet","create","noop","$beforeDestroy","$afterDestroy","sub","args","staticProps","directives","components","filters","json","obj","replacer","space","JSON","stringify","filter","filterName","mount","id","instance","Comp","dir","nodeType","getElementById","getDirs","type","getComponent","getAttrs","__mountcall","prototype","$get","expression","watch","parse","getValue","$set","key","val","reVm","$replace","last","reformed","reKey","hasKey","reformScope","vm","k","shift","join","isBubble","watchers","replace","pop","push","getWatchers","watcher","$watch","callback","immediate","_originFn","addWatcher","$unwatch","unwatch","$destroy","removeEl","wacher","removeChild","version","./check-binding.js","./class.js","./component.js","./directive.js","./directives","./dom-utils.js","./env.js","./scope","./utils.js","./watcher.js",3,"dirResult","NODETYPE","FRAGMENT","isUndefined","ELEMENT","COMMENT","TEXT","checkText","nodeName","toLowerCase","createDocumentFragment","checkAttr","terminal","next","child","firstChild","nextSibling","terminalPriority","cstr","result","priority","removeAttribute","setBinding","node","token","hasToken","nodeValue","tokens","parseToken","textMap","text","tn","createTextNode","insertBefore","partialReg","test","dirName","anchors","setAnchors","escape","html","isFunction","link","unBinding","ATTR","createElement","./directive","./token.js","./utils","./watcher",4,"protoProps","sup","apply","Fn","supRef","__super__",5,"tag","tagName","Component","statics","tags","componentName","context","paths","CurCstr","comName","component",6,"opts","attr","attrName","proto","setAttribute","attributes","slice","value","indexOf","getDir","origin","attrPostReg","conditional","anchor","sort","d0","d1","subType","parent","start","createComment","end","evaluate","astCache","unLink","tearDown","getNodes","nodes","cache","_type","ast","message","console","error","forgive","eval","./dom-utils","./eval.js","./parse.js",7,"setProperty","isComponent","hyphenToCamel","setAttr","removeProperty","undef","style","className","__repeat","attrs","newAttrs","position","../utils.js",8,"initClass","classes","classStr",9,"getProperty","comp","curPath","comPath","_dir","camelToHyphen","../check-binding","../dom-utils",10,11,"frag","remove","state","add","walked","_hide","_needUpdate","../env",12,"innerHTML","template","src","repeat","model","on","ref","../env.js","./attr","./component","./content","./if","./model","./on","./ref","./repeat","./style",13,"events","teminal","ev","isSetDefaut","crlf","newVal","handler","callHandler","propertyName","ie","$valuekey","oldValue","checked","$lazy","multiple","vals","options","selected","split","removeEvent","addEvent","../event-bind.js","../token.js",14,"selector","cur","target","srcElement","els","toArray","querySelectorAll","delegateTarget","eventBind","eventType","name","../utils",15,"isArray","$index","__vmList",16,"getAnchor","index","vmList","isRange","__anchor","getNodesByIndex","getElByIndex","arrDiff","arr1","arr2","trackId","arr2Copy","indexByTrackId","splice","item","list","startIndex","item1","arrayMethods","getAttribute","curArr","items","that","arrs","listPath","summary","pos","oldPos","cloneNode","assignments","localKey","local","__dirs__","$remove","method","../bee","../scope",17,"pixelAttrs","initStyle","styles","dashKey","styleStr","isNumeric",18,"wraper","trim","hasAttr","hasAttribute",19,"root","jsdom",20,"callFilter","arg","then","getOperator","arity","operators","reset","summaryCall","locals","unary","+","v","-","!","[","{","typeof","new","binary","*","/","%","<",">","<=",">=","==","!=","===","!==","&&","||",",",".","prev","first","(","|","Date","Function","in","catchby","ternary","?","argName","tree","res","Array",21,"event","addEventListener","attachEvent","removeEventListener","detachEvent",22,"source","F","msg","from","tokenize","suffix","c","q","str","make","to","charAt","isFinite","parseInt","substr","String","fromCharCode","make_parse","vars","token_nr","symbol_table","itself","find","nud","led","std","lbp","advance","rbp","left","original_symbol","symbol","bp","constant","x","infix","second","infixr","Math","third","_source","_context",23,"ass","curVm",24,"tokenReg","lastIndex","exec",25,"bra","keyPathReg","copy","copyIsArray","clone","deep","hyphensReg","dash","char","toUpperCase","camelReg","upperChar","div","all","getElementsByTagName","parseFloat","toString","beforeFn","oriFn","fn","breakCheck","ret","keyStr","chain","arrLike","arr",26,"summaryCache","NaN","exp","watcherUpdate","point"],"mappings":"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","file":"bee.min.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})",null,"\"use strict\";\n\nvar doc = require('./env.js').document\n  , utils = require('./utils.js')\n  , Class = require('./class.js')\n  , directive = require('./directive.js')\n  , Com = require('./component.js')\n  , Watcher = require('./watcher.js')\n\n  , dirs = require('./directives')\n  , domUtils = require('./dom-utils.js')\n  , checkBinding = require('./check-binding.js')\n  , scope = require('./scope')\n\n  , Dir = directive.Directive\n  ;\n\n\nvar isObject = utils.isObject\n  , isPlainObject = utils.isPlainObject\n  , parseKeyPath = utils.parseKeyPath\n  , deepSet = utils.deepSet\n  , extend = utils.extend\n  , create = utils.create\n  ;\n\n// directive \nfunction setPrefix(newPrefix) {\n  if(newPrefix){\n    this.prefix = newPrefix;\n  }\n}\n\n//TODO \nvar mergeProps = {\n  $data: 1\n};\n\nvar lifeCycles = {\n  $beforeInit: utils.noop\n, $afterInit: utils.noop\n, $beforeUpdate: utils.noop\n, $afterUpdate: utils.noop\n, $beforeDestroy: utils.noop\n, $afterDestroy: utils.noop\n};\n\n/**\n * \n * @constructor\n * @param {String|Element} [tpl] .  props.$tpl\n * @param {Object} [props] /\n */\nfunction Bee(tpl, props) {\n  if(isPlainObject(tpl)) {\n    props = tpl;\n  }else{\n    props = props || {};\n    if(tpl) {\n      props.$tpl = tpl;\n    }\n  }\n\n  var defaults = {\n    //$ /\n    $data: extend(true, {}, this.constructor.defaults)\n  , $refs: {}\n  , $mixins: []\n\n  , $el: this.$el || null\n  , $tpl: this.$tpl || '<div>{{> $content }}</div>'\n  , $content: this.$content || null\n\n  , $isReplace: false\n  , $parent: null\n  , $root: this\n  , $context: null\n\n    ///\n  , _watchers: {}\n  , _assignments: null// vm \n  , _relativePath: []\n  , __links: []\n  , _isRendered: false\n  };\n\n  var mixins = [defaults].concat(this.$mixins).concat(props.$mixins).concat([props])\n\n  mixins.forEach(function(mixin) {\n    var prop;\n    for(var propKey in mixin) {\n      if(mixin.hasOwnProperty(propKey)) {\n        if ((propKey in mergeProps) && isObject(mixin[propKey])) {\n          //\n          //mergeProps \n          prop = extend({}, this[propKey], mixin[propKey])\n          this[propKey] = extend(mixin[propKey], prop)\n        } else if (propKey in lifeCycles) {\n          this[propKey] = utils.afterFn(this[propKey], mixin[propKey])\n        } else {\n          this[propKey] = mixin[propKey];\n        }\n      }\n    }\n  }.bind(this))\n\n  extend(this, this.$data);\n\n  resolveTpl.call(this);\n\n  this.$beforeInit()\n  this.$el.bee = this;\n\n  //__links  $el \n  this.__links = this.__links.concat( checkBinding.walk.call(this, this.$el) );\n\n  this._isRendered = true;\n  this.$afterInit();\n}\n\n//\nextend(Bee, {extend: utils.afterFn(Class.extend, utils.noop, function(sub, args) {\n  var staticProps = args[1] || {};\n  // directives ,components, filters , \n  //,  directive, components, filters . \n  sub.directives = extend(create(this.directives), staticProps.directives);\n  sub.components = extend(create(this.components), staticProps.components);\n  sub.filters = extend(create(this.filters), staticProps.filters);\n\n  sub.defaults = extend(true, {}, this.defaults, staticProps.defaults);\n}), utils: utils}, Dir, Com, {\n  setPrefix: setPrefix\n, directive: directive.directive\n, prefix: ''\n, doc: doc\n, directives: {}\n, components: {}\n, defaults: {}\n, filters: {\n    //build in filter\n    json: function(obj, replacer, space) {\n      return JSON.stringify(obj, replacer, space) }\n  }\n, filter: function(filterName, filter) {\n    this.filters[filterName] = filter;\n  }\n, mount: function(id, props) {\n    var el = id.nodeType ? id : doc.getElementById(id);\n    var instance;\n    var dirs = directive.getDirs(el, this);\n    var Comp, dir;\n\n    dir = dirs.filter(function(dir) {\n      return  dir.type === 'tag' || dir.type === 'component'\n    })[0];\n\n    if(dir) {\n      Comp = this.getComponent(dir.path)\n    }\n\n    props = props || {};\n    if(Comp) {\n      props.$data = extend(domUtils.getAttrs(el), props.$data)\n      instance = new Comp(extend({$el: el, $isReplace: true, __mountcall: true}, props))\n    }else{\n      instance = new this(el, props);\n    }\n    return instance\n  }\n});\n\n\nBee.setPrefix('b-');\n\n// directive\nfor(var dir in dirs) {\n  Bee.directive(dir, dirs[dir]);\n}\n\n//\n//----\nextend(Bee.prototype, lifeCycles, {\n  /**\n   * /\n   * @param {String} expression /\n   * @returns {*}\n   */\n  $get: function(expression) {\n    var dir = new Dir('$get', {\n      path: expression\n    , watch: false\n    });\n    dir.parse();\n    return dir.getValue(this, false)\n  }\n\n  /**\n   *  `.data` . ,  .$data\n   * @param {String} [key] .\n   * @param {AnyType|Object} val .\n   */\n, $set: function(key, val) {\n    var add, keys, hasKey = false;\n    var reformed, reKey, reVm = this;\n\n    if(arguments.length === 1){\n      if(isObject(key)) {\n        extend(this.$data, key);\n        extend(this, key);\n      }else{\n        this.$data = key;\n      }\n      update.call(reVm, key);\n    }else{\n      this.$replace(key, val);\n    }\n  }\n  /**\n   * \n   */\n, $replace: function (key, val) {\n    var keys, last, hasKey = false;\n    var reformed, reKey, reVm = this;\n\n    if(arguments.length === 1){\n      val = key;\n      reKey = '$data';\n      keys = [reKey];\n    }else{\n      hasKey = true;\n      reformed = scope.reformScope(this, key)\n      reKey = reformed.path;\n      reVm = reformed.vm;\n      keys = parseKeyPath(reKey);\n    }\n\n    last = reVm.$get(reKey);\n\n    if (keys[0] === '$data') {\n      if(reKey === '$data') {\n        if(isObject(this.$data)) {\n          Object.keys(this.$data).forEach(function (k) {\n            delete this[k];\n          }.bind(this))\n        }\n        extend(reVm, val);\n      }else {\n        deepSet(keys.shift().join('.'), val, reVm)\n      }\n    } else {\n      deepSet(reKey, val, reVm.$data);\n    }\n    deepSet(reKey, val, reVm)\n\n    hasKey ? update.call(reVm, reKey, extend({}, last, val)) : update.call(reVm, extend({}, last, val));\n  }\n  /**\n   * \n   * @param {String} keyPath  keyPath\n   * @param {Boolean} [isBubble=true]  keyPath \n   */\n, $update: function (keyPath, isBubble) {\n    isBubble = isBubble !== false;\n\n    var keys = parseKeyPath(keyPath.replace(/^\\$data\\./, '')), key;\n    var watchers;\n\n    while(key = keys.join('.')) {\n      watchers = this._watchers[key] || [];\n\n      for (var i = 0, l = watchers.length; i < l; i++) {\n        watchers[i] && watchers[i].update();\n      }\n\n      if(isBubble) {\n        keys.pop();\n        // $data\n        if(!keys.length && key !== '$data'){\n          keys.push('$data');\n        }\n      }else{\n        break;\n      }\n    }\n\n    //\n    Watcher.getWatchers(this, keyPath).forEach(function(watcher) {\n      watcher.update();\n    }.bind(this))\n\n    //\n    if(isBubble) {\n      if(this.$parent) {\n        // vm \n        this._relativePath.forEach(function (path) {\n          this.$parent.$update(path);\n        }.bind(this))\n      }\n    }\n  }\n, $watch: function (expression, callback, immediate) {\n    if(callback) {\n      var update = callback.bind(this);\n      update._originFn = callback;\n      return Watcher.addWatcher.call(this, new Dir('$watch', {path: expression, update: update, immediate : !!immediate}))\n    }\n  }\n, $unwatch: function (expression, callback) {\n    Watcher.unwatch(this, expression, callback)\n  }\n  //\n  //removeEl  false \n, $destroy: function(removeEl) {\n    this.$beforeDestroy()\n    this.__links.forEach(function(wacher) {\n      wacher.unwatch()\n    })\n    removeEl !== false && this.$el.parentNode && this.$el.parentNode.removeChild(this.$el)\n    this.__links = [];\n    this.$afterDestroy()\n  }\n});\n\nfunction update (keyPath, data) {\n  var keyPaths;\n  this.$beforeUpdate(this.$data)\n  if(arguments.length === 1) {\n    data = keyPath;\n  }else{\n    keyPaths = [keyPath];\n  }\n\n  if(!keyPaths) {\n    if(isObject(data)) {\n      keyPaths = Object.keys(data);\n    }else{\n      //.$data \n      keyPaths = ['$data'];\n    }\n  }\n\n  for(var i = 0, path; path = keyPaths[i]; i++){\n    this.$update(path, true);\n  }\n  this.$afterUpdate(this.$data)\n}\n\n// $el,  $content, $tpl\nfunction resolveTpl() {\n  var el = this.$el\n    , content = this.$content\n    , tpl = this.$tpl\n    , tplEl\n    ;\n\n  content = el && el.childNodes ? el.childNodes : content\n\n  if(el) {\n    // $el  $conten \n    content = el.childNodes;\n  }\n\n  if(content) {\n    // $content documentFragment\n    this.$content = domUtils.createContent(content)\n  }\n\n  if(utils.isObject(tpl)){\n    //DOM \n    tplEl = tpl;\n    tpl = tplEl.outerHTML;\n  }else{\n    //\n    tplEl = domUtils.createContent(tpl).childNodes[0];\n  }\n\n  if(el) {\n    if(this.$isReplace) {\n      el.parentNode && el.parentNode.replaceChild(tplEl, el)\n      el = tplEl;\n    }else{\n      el.appendChild(tplEl)\n    }\n  }else{\n    el = tplEl;\n  }\n\n  this.$el = el;\n}\n\nBee.version = '0.5.3';\n\nmodule.exports = Bee;\n","\"use strict\";\n\nvar Watcher = require('./watcher')\n  , token = require('./token.js')\n  , utils = require('./utils')\n  , doc = require('./env.js').document\n  , directive = require('./directive')\n  ;\n\nvar NODETYPE = {\n    ELEMENT: 1\n  , ATTR: 2\n  , TEXT: 3\n  , COMMENT: 8\n  , FRAGMENT: 11\n};\n\ndoc.createElement('template');\n\n/**\n *  dom \n * @private\n * @param {Element|NodeList} el\n * @returns {Array} \n */\n\nfunction walk(el) {\n  var watchers = [], dirResult;\n  if(el.nodeType === NODETYPE.FRAGMENT) {\n    el = el.childNodes;\n  }\n\n  if(('length' in el) && utils.isUndefined(el.nodeType)){\n    //node list\n    // nodelist  {{text}} , , \n    for(var i = 0; i < el.length; i++) {\n      watchers = watchers.concat( walk.call(this, el[i]) );\n    }\n    return watchers;\n  }\n\n  switch (el.nodeType) {\n    case NODETYPE.ELEMENT:\n      break;\n    case NODETYPE.COMMENT:\n      //\n      return watchers;\n      break;\n    case NODETYPE.TEXT:\n      //\n      watchers = watchers.concat( checkText.call(this, el) );\n      return watchers;\n  }\n\n  if(el.nodeName.toLowerCase() === 'template') {\n    //template shim\n    if(!el.content) {\n      el.content = doc.createDocumentFragment();\n      while(el.childNodes[0]) {\n        el.content.appendChild(el.childNodes[0])\n      }\n    }\n  }\n\n  dirResult = checkAttr.call(this, el);\n  watchers = watchers.concat(dirResult.watchers)\n  if(dirResult.terminal){\n    return watchers;\n  }\n\n  if(el.nodeName.toLowerCase() === 'template') {\n    watchers = watchers.concat( walk.call(this, el.content) )\n  }\n\n  for(var child = el.firstChild, next; child; ){\n    next = child.nextSibling;\n    watchers = watchers.concat( walk.call(this, child) );\n    child = next;\n  }\n\n  return watchers\n}\n\n//\nfunction checkAttr(el) {\n  var cstr = this.constructor\n    , dirs = directive.getDirs(el, cstr, this.$context)\n    , dir\n    , terminalPriority, watchers = []\n    , result = {};\n  ;\n\n  for (var i = 0, l = dirs.length; i < l; i++) {\n    dir = dirs[i];\n    dir.dirs = dirs;\n\n    // terminal  true  directive,  directive \n    if(terminalPriority > dir.priority) {\n      break;\n    }\n\n    el.removeAttribute(dir.nodeName);\n\n    watchers = watchers.concat( setBinding.call(this, dir) );\n\n    if(dir.terminal) {\n      result.terminal = true;\n      terminalPriority = dir.priority;\n    }\n  }\n\n  result.watchers = watchers\n\n  return result\n}\n\nvar partialReg = /^>\\s*/;\n//({{...}})\nfunction checkText(node) {\n  var watchers = [];\n  if(token.hasToken(node.nodeValue)) {\n    var tokens = token.parseToken(node.nodeValue)\n      , textMap = tokens.textMap\n      , el = node.parentNode\n      , dirs = this.constructor.directives\n      , t, dir\n      ;\n\n    //{{key}}\n    if(textMap.length > 1) {\n      textMap.forEach(function(text) {\n        var tn = doc.createTextNode(text);\n        el.insertBefore(tn, node);\n        watchers = watchers.concat(checkText.call(this, tn));\n      }.bind(this));\n      el.removeChild(node);\n    }else{\n      t = tokens[0];\n      //.\n      if(partialReg.test(t.path)) {\n        t.path = t.path.replace(partialReg, '');\n        dir = utils.create(dirs.content)\n        dir.dirName = dir.type\n        dir.anchors = directive.setAnchors(node, dir.type)\n      }else{\n        dir = utils.create(t.escape ? dirs.text : dirs.html)\n      }\n\n      watchers = setBinding.call(this, utils.extend(dir, t, {\n        el: node\n      }));\n    }\n  }\n  return watchers\n}\n\nfunction setBinding(dir) {\n  var watcher\n  if(dir.replace) {\n    var el = dir.el;\n    if(utils.isFunction(dir.replace)) {\n      dir.node = dir.replace();\n    }else{\n      dir.node = doc.createTextNode('');\n    }\n\n    dir.el = dir.el.parentNode;\n    dir.el.replaceChild(dir.node, el);\n  }\n\n  dir.vm = this;\n  dir.link();\n\n  watcher = Watcher.addWatcher.call(this, dir)\n  return watcher ? [watcher] : []\n}\n\nfunction unBinding(watchers) {\n  watchers.forEach(function(watcher) {\n    watcher.unwatch()\n  })\n}\n\nmodule.exports = {\n  walk: walk,\n  unBinding: unBinding\n};\n","var extend = require('./utils.js').extend;\n\nvar Class = {\n  /**\n   * .\n   * : `var Car = Bee.extend({drive: function(){}}); new Car();`\n   * @param {Object} [protoProps] \n   * @param {Object} [staticProps] \n   * @returns {Function} \n   */\n  extend: function (protoProps, staticProps) {\n    protoProps = protoProps || {};\n    var constructor = protoProps.hasOwnProperty('constructor') ?\n          protoProps.constructor : function(){ return sup.apply(this, arguments); }\n    var sup = this;\n    var Fn = function() { this.constructor = constructor; };\n    var supRef = {__super__: sup.prototype};\n\n    Fn.prototype = sup.prototype;\n    constructor.prototype = new Fn();\n    extend(constructor.prototype, supRef, protoProps);\n    extend(constructor, sup, supRef, staticProps);\n\n    return constructor;\n  }\n};\n\nmodule.exports = Class;\n","\"use strict\";\n\nvar utils = require('./utils.js');\n\n/**\n * \n * @param {String} tagName \n * @param {Function|props} Component  / \n * @return {Function} \n */\nfunction tag(tagName, Component, statics) {\n  var tags = this.components = this.components || {};\n\n  this.doc.createElement(tagName);//for old IE\n\n  if(utils.isObject(Component)) {\n    Component = this.extend(Component, statics);\n  }\n  return tags[tagName] = Component;\n}\n\n/**\n * \n * @param {String} componentName \n * @param {Bee} context \n */\nfunction getComponent(componentName, context) {\n  var paths = utils.parseKeyPath(componentName);\n  var CurCstr = this;\n  paths.forEach(function(comName) {\n    CurCstr = CurCstr && CurCstr.components[comName];\n  });\n\n  if(context && context.constructor && !CurCstr) {\n    CurCstr = context.constructor.getComponent(componentName, context.$context);\n  }\n  return CurCstr || null;\n}\n\nexports.tag = exports.component = tag;\nexports.getComponent = getComponent;\n","\"use strict\";\n\nvar utils = require('./utils.js')\n  , token = require('./token.js')\n  , doc = require('./env.js').document\n  , parse = require('./parse.js').parse\n  , evaluate = require('./eval.js')\n  , domUtils = require('./dom-utils')\n\n  , create = utils.create\n  ;\n\n/**\n *  Bee  (directive). `Bee.directive`\n * @param {String} key directive \n * @param {Object} [opts] directive \n * @param {Number} opts.priority=0 directive . .\n * @param {Boolean} opts.terminal=false  directive ,  directive .\n *   terminal ,  directive  directive , .\n * @param {Boolean} opts.anchor anchor  true , .  `anchors.start`  `anchors.end`\n */\nfunction directive(key, opts) {\n  var dirs = this.directives = this.directives || {};\n\n  return dirs[key] = new Directive(key, opts);\n}\n\nfunction Directive(key, opts) {\n  this.type = key;\n  utils.extend(this, opts);\n}\n\nvar astCache = {};\n\nDirective.prototype = {\n  priority: 0//\n, type: '' //\n, subType: '' //.  `b-on-click`  type  `on`, subType  `click`\n, sub: false //\n, link: utils.noop//\n, unLink: utils.noop//\n, update: utils.noop//\n, tearDown: utils.noop\n, terminal: false//\n, replace: false//. , \n, watch: true// key .  false , update \n, immediate: true // dir  update \n\n, anchor: false\n, anchors: null\n\n  //.\n, getNodes: function(start, end) {\n    start = start || this.anchors.start;\n    end = end || this.anchors.end;\n\n    var nodes = [], node = start.nextSibling;\n    if(this.anchor && node) {\n      while(node !== end){\n        nodes.push(node);\n        node = node.nextSibling;\n      }\n\n      return nodes;\n    }\n  }\n  //\n, parse: function() {\n    var cache = astCache[this.path]\n    if(cache && cache._type === this.type){\n      this.ast = cache\n    }else {\n      if(this.type == 'attr' && this.escape === false) {\n        this.path = '{' + this.path + '}'\n      }\n      try {\n        this.ast = parse(this.path, this.type);\n        this.ast._type = this.type;\n        astCache[this.path] = this.ast;\n      } catch (e) {\n        this.ast = {};\n        e.message = 'SyntaxError in \"' + this.path + '\" | ' + e.message;\n        console.error(e);\n      }\n    }\n  }\n  //\n  //forgive[true]:  undefined  null \n, getValue: function(scope, forgive) {\n    forgive = forgive !== false;\n    var val;\n\n    try{\n      val = evaluate.eval(this.ast, scope, this);\n    }catch(e){\n      val = '';\n      console.error(e);\n    }\n    if(forgive && (utils.isUndefined(val) || val === null)) {\n      val = '';\n    }\n    return val;\n  }\n};\n\nvar attrPostReg = /\\?$/;\n\n/**\n *  HTML \n * @param  {Element} el   \n * @param  {Function} cstr \n * @param  {Bee} context \n * @return {directeve[]}      `el` \n */\nfunction getDirs(el, cstr, context){\n  var attr, attrName, dirName, proto\n    , dirs = [], dir\n    , parent = el.parentNode\n    , nodeName = el.nodeName.toLowerCase()\n    , directives = cstr.directives\n    , prefix = cstr.prefix\n    ;\n\n  //,  directive\n  if(cstr.getComponent(nodeName, context)) {\n    el.setAttribute(prefix + 'component', nodeName);\n  }\n\n  for(var i = el.attributes.length - 1; i >= 0; i--){\n    attr = el.attributes[i];\n    attrName = attr.nodeName;\n    dirName = attrName.slice(prefix.length);\n    proto = {el: el, node: attr, nodeName: attrName, path: attr.value};\n    dir = null;\n\n    if(attrName.indexOf(prefix) === 0 && (dir = getDir(dirName, directives))) {\n      //\n      dir.dirName = dirName//dir \n    }else if(token.hasToken(attr.value)) {\n      //\n      token.parseToken(attr.value).forEach(function(origin) {\n        origin.dirName = attrName ;\n        dirs.push(utils.extend(create(directives.attr), proto, origin))\n      });\n      // anchor, \n    }else if(attrPostReg.test(attrName)) {\n      //\n      dir = utils.extend(create(directives.attr), { dirName: attrName.replace(attrPostReg, ''), conditional: true });\n    }\n\n    if(dir) {\n      if(dir.anchor) {\n        dir.anchors = setAnchors(el, dir.dirName);\n      }\n      dirs.push(utils.extend(dir, proto));\n    }\n  }\n  dirs.sort(function(d0, d1) {\n    return d1.priority - d0.priority;\n  });\n  return dirs;\n}\n\nfunction getDir(dirName, dirs) {\n  var dir, subType;\n  for(var key in dirs) {\n    if(dirName === key){\n      dir = dirs[key]\n      break\n    }else if(dirName.indexOf(key + '-') === 0){\n      dir = dirs[key]\n      if(!dir.sub){\n        dir = null\n      }else{\n        subType = dirName.slice(key.length + 1)\n      }\n      break;\n    }\n  }\n  if(dir) {\n    dir = create(dir);\n    dir.subType = subType;\n  }\n  return dir;\n}\n\nfunction setAnchors(node, dirName) {\n  var parent = node.parentNode\n    , anchors = {}\n    ;\n\n    anchors.start = doc.createComment(dirName + ' start');\n    parent.insertBefore(anchors.start, node);\n\n    anchors.end = doc.createComment(dirName + ' end');\n    if(node.nextSibling) {\n      parent.insertBefore(anchors.end, node.nextSibling);\n    }else{\n      parent.appendChild(anchors.end);\n    }\n    return anchors\n}\n\nmodule.exports = {\n  Directive: Directive,\n  directive: directive,\n  getDirs: getDirs,\n  setAnchors: setAnchors\n};\n","\"use strict\";\n\n//\n\nvar utils = require('../utils.js');\n\nmodule.exports = {\n  link: function() {\n    if(this.dirName === this.type && this.nodeName !== this.dirName) {//attr binding\n      this.attrs = {};\n    }else {\n      //, \n      this.update('')\n    }\n  }\n, update: function(val) {\n    var el = this.el;\n    var newAttrs = {};\n    var textMap = this.textMap\n\n    //b-attr\n    if(this.attrs) {\n      for(var attr in val) {\n        setProperty.call(this, el, attr, val[attr]);\n\n        delete this.attrs[attr];\n\n        newAttrs[attr] = true;\n      }\n\n      //\n      for(var attr in this.attrs) {\n        removeProperty.call(this, el, attr);\n      }\n      this.attrs = newAttrs;\n    }else{\n      if(this.conditional) {\n        val ? setProperty.call(this, el, this.dirName, val) : removeProperty.call(this, el, this.dirName);\n      }else{\n        textMap[this.position] = val;\n        setProperty.call(this, el, this.dirName, textMap.length > 1 ? textMap.join('') : textMap[0]);\n      }\n    }\n  }\n};\n\nfunction setProperty(el, key, val) {\n  if(isComponent(this)) {\n    el.bee.$set(utils.hyphenToCamel(key), val)\n  }else{\n    setAttr(el, key, val)\n  }\n}\n\nfunction removeProperty(el, key, undef) {\n  if(isComponent(this)) {\n    el.bee.$set(utils.hyphenToCamel(key), undef)\n  }else{\n    el.removeAttribute(key);\n  }\n}\n\n\n//IE  `setAttribute` .\n// `el[attr] = value`  `removeAttribute` .\nfunction setAttr(el, attr, val){\n  try{\n    if(((attr in el) || attr === 'class')){\n      if(attr === 'style' && el.style.setAttribute){\n        el.style.setAttribute('cssText', val);\n      }else if(attr === 'class'){\n        el.className = val;\n      }else{\n        el[attr] = typeof el[attr] === 'boolean' ? true : val;\n      }\n    }\n  }catch(e){}\n  //chrome setattribute with `{{}}` will throw an error\n  el.setAttribute(attr, val);\n}\n\nfunction isComponent (dir) {\n  var component = dir.el.bee;\n  return component && !component.__repeat && component != dir.vm;\n}\n","\"use strict\";\n\nmodule.exports = {\n  link: function() {\n    this.initClass = this.el.className || ''\n    this.keys = {};\n  },\n  update: function(classes) {\n    var classStr = this.initClass\n      , watcher = this.watcher\n      , key\n      ;\n\n    //class  className  {className: 'key'} \n    if(typeof classes === 'string') {\n      if(classes) {\n        classStr += ' ' + classes;\n      }\n    }else{\n      for(var className in classes) {\n        key = classes[className]\n\n        if(!this.keys[key]) {// key\n          this.keys[key] = true;\n          //, \n          this.vm.$watch(key, function() {\n            watcher.update()\n          })\n        }\n        if(this.vm.$get(key)) {\n          classStr += ' ' + className\n        }\n      }\n    }\n    this.el.className = classStr;\n  }\n};\n","//component as directive\nvar utils = require('../utils.js');\nvar domUtils = require('../dom-utils')\nvar checkBinding = require('../check-binding')\n\nmodule.exports = {\n  priority: -1\n, watch: false\n, unLink: function() {\n    this.component && this.component.$destroy()\n  }\n, link: function() {\n    var vm = this.vm;\n    var el = this.el;\n    var cstr = vm.constructor;\n    var comp;\n    var dirs, $data = {};\n    var Comp = cstr.getComponent(this.path, vm.$context)\n    var statics = {};\n\n    if(Comp) {\n\n      // `Bee.mount` \n      if(Comp === cstr && vm.__mountcall || el.bee && el.bee === vm) {\n        return;\n      }\n\n      dirs = this.dirs.filter(function (dir) {\n        return dir.type == 'attr' || dir.type == 'with';\n      });\n\n      dirs.forEach(function (dir) {\n        var curPath, comPath;\n\n        curPath = dir.path;\n        if(dir.type === 'with') {\n          //comPath = '$data'\n          utils.extend(true, $data, vm.$get(curPath))\n\n          //, \n          //TODO  b-with \n          vm.$watch(curPath, function (val) {\n            comp && comp.$set(utils.extend({}, vm.$get(curPath)));\n          })\n        }else{\n          comPath = utils.hyphenToCamel(dir.dirName);\n          $data[comPath] = getProperty(dir)\n          dir.el.removeAttribute(dir.dirName)\n        }\n      });\n\n      //\n      vm.__links = vm.__links.concat(checkBinding.walk.call(vm, el.childNodes));\n\n      statics = domUtils.getAttrs(el)\n\n      //\n      var _dir;\n      for(var attr in statics) {\n        _dir = utils.camelToHyphen(attr);\n        _dir = _dir.slice(vm.constructor.prefix.length)\n\n        if(_dir in vm.constructor.directives) {\n          delete statics[attr]\n        }\n      }\n\n      this.component = comp = new Comp({\n        $el: el,\n        $isReplace: true,\n        $context: vm,\n\n        $data: utils.extend(true, {}, $data, statics)\n      });\n      el.bee = comp;\n\n      return comp;\n    }else{\n      console.error('Component: ' + this.path + ' not defined!');\n    }\n  }\n};\n\n//, \nfunction getProperty(dir) {\n  var textMap = dir.textMap, val\n  val = textMap && textMap.length > 1 ? textMap.join('') : textMap[0]\n\n  return utils.isPlainObject(val) ? utils.extend(true, {}, val) : val;\n}\n","\"use strict\";\n\nvar domUtils = require('../dom-utils')\n  , checkBinding = require('../check-binding')\n  ;\n\nmodule.exports = {\n  replace: true\n, anchor: true\n, link: function() {\n    this.watchers = [];\n  }\n, unLink: function() {\n    this.watchers.forEach(function(watcher) {\n      watcher.unwatch()\n    });\n  }\n, update: function(tpl) {\n    var nodes = this.getNodes()\n    var parent = this.anchors.end.parentNode\n\n    nodes.forEach(function(node) {\n      parent.removeChild(node);\n    });\n\n    this.unLink();\n\n    var content = domUtils.createContent(tpl)\n\n    this.watchers = checkBinding.walk.call(this.vm, content)\n    parent.insertBefore(content, this.anchors.end)\n  }\n}\n","\"use strict\";\n\nvar checkBinding = require('../check-binding')\n  , domUtils = require('../dom-utils')\n  , doc = require('../env').document\n\nmodule.exports = {\n  anchor: true\n, priority: 900\n, terminal: true\n, link: function() {\n    this.watchers = [];\n\n    if(this.el.content) {\n      this.frag = this.el.content;\n      this.el.parentNode.removeChild(this.el);\n    }else{\n      this.frag = doc.createDocumentFragment()\n    }\n    this.remove();\n  }\n, update: function(val) {\n    if(val) {\n      if(!this.state) { this.add() }\n    }else{\n      if(this.state) { this.remove(); }\n    }\n    this.state = val;\n  }\n\n, add: function() {\n    var anchor = this.anchors.end;\n    if(!this.walked) {\n      this.walked = true;\n      this.watchers = checkBinding.walk.call(this.vm, this.frag);\n    }\n    this.watchers.forEach(function(watcher) {\n      watcher._hide = false;\n      if(watcher._needUpdate) {\n        watcher.update()\n        watcher._needUpdate = false;\n      }\n    })\n    anchor.parentNode && anchor.parentNode.insertBefore(this.frag, anchor);\n  }\n, remove: function() {\n    var nodes = this.getNodes();\n\n    for(var i = 0, l = nodes.length; i < l; i++) {\n      this.frag.appendChild(nodes[i]);\n    }\n\n    this.watchers.forEach(function(watcher) {\n      watcher._hide = true;\n    })\n  }\n};\n","\"use strict\";\n\nvar doc = require('../env.js').document\n  , utils = require('../utils.js')\n  , checkBinding = require('../check-binding')\n  ;\n\nvar dirs = {};\n\n\ndirs.text = {\n  terminal: true\n, replace: true\n, update: function(val) {\n    this.node.nodeValue = utils.isUndefined(val) ? '' : val;\n  }\n};\n\n\ndirs.html = {\n  terminal: true\n, replace: true\n, link: function() {\n    this.nodes = [];\n  }\n, update: function(val) {\n    var el = doc.createElement('div');\n    el.innerHTML = utils.isUndefined(val) ? '' : val;\n\n    var node;\n    while(node = this.nodes.pop()) {\n      node.parentNode && node.parentNode.removeChild(node);\n    }\n\n    var nodes = el.childNodes;\n    while(node = nodes[0]) {\n      this.nodes.push(node);\n      this.el.insertBefore(node, this.node);\n    }\n  }\n};\n\ndirs.template = {\n  priority: 10000\n, watch: false\n, link: function() {\n    var nodes = this.el.childNodes\n      , frag = doc.createDocumentFragment()\n      ;\n\n    while(nodes[0]) {\n      frag.appendChild(nodes[0]);\n    }\n\n    this.el.content = frag;\n    //this.el.setAttribute(this.nodeName, '');\n  }\n};\n\n//,  URL \ndirs.src = {\n  update: function(val) {\n    this.el.src = val;\n  }\n};\n\ndirs['with'] = {};\n\ndirs['if'] = require('./if')\ndirs.repeat = require('./repeat');\ndirs.attr = require('./attr');\ndirs.model = require('./model');\ndirs.style = require('./style');\ndirs.on = require('./on');\ndirs.component = dirs.tag = require('./component');\ndirs.content = require('./content')\ndirs.ref = require('./ref')\ndirs['class'] = require('./class.js')\n\nmodule.exports = dirs;\n","\"use strict\";\r\n\r\nvar utils = require('../utils.js')\r\n  , hasToken = require('../token.js').hasToken\r\n  , events = require('../event-bind.js')\r\n  , checkBinding = require('../check-binding')\r\n  ;\r\n\r\n\r\nmodule.exports = {\r\n  teminal: true\r\n, priority: -2\r\n, link: function() {\r\n    var keyPath = this.path;\r\n    var vm = this.vm;\r\n\r\n    if(!keyPath) { return false; }\r\n\r\n    var comp = this.el\r\n      , ev = 'change'\r\n      , attr\r\n      , value = attr = 'value'\r\n      , isSetDefaut = utils.isUndefined(vm.$get(keyPath))// model \r\n      , crlf = /\\r\\n/g//IE 8  textarea  \\n  \\r\\n. \r\n\r\n        //\r\n      , update = function(val) {\r\n          if(val === 0 && comp.type !== 'checkbox') { val = '0' }\r\n          var newVal = (val || '') + ''\r\n            , val = comp[attr]\r\n            ;\r\n          val && val.replace && (val = val.replace(crlf, '\\n'));\r\n          if(newVal !== val){ comp[attr] = newVal; }\r\n        }\r\n\r\n        // viewModel\r\n      , handler = function() {\r\n          var val = comp[value];\r\n\r\n          val.replace && (val = val.replace(crlf, '\\n'));\r\n          vm.$set(keyPath, val);\r\n        }\r\n      , callHandler = function(e) {\r\n          if(e && e.propertyName && e.propertyName !== attr) {\r\n            return;\r\n          }\r\n          handler.apply(this, arguments)\r\n        }\r\n      , ie = utils.ie\r\n      ;\r\n\r\n    if(comp.bee) {\r\n      // \r\n      comp = comp.bee;\r\n      value = comp.$valuekey;\r\n      if(value) {\r\n        update = function(val) {\r\n          comp.$replace(value, val)\r\n        };\r\n        handler = function() {\r\n          vm.$replace(keyPath, comp.$get(value))\r\n        }\r\n        comp.$watch(value, function(val, oldValue) {\r\n          val !== oldValue && handler()\r\n        })\r\n        //\r\n        comp.$set(value, vm.$get(keyPath))\r\n      }\r\n    }else{\r\n      //\r\n      vm.__links = vm.__links.concat(checkBinding.walk.call(vm, comp.childNodes));\r\n\r\n      //HTML \r\n      switch(comp.tagName) {\r\n        default:\r\n          value = attr = 'innerHTML';\r\n          //ev += ' blur';\r\n        case 'INPUT':\r\n        case 'TEXTAREA':\r\n          switch(comp.type) {\r\n            case 'checkbox':\r\n              value = attr = 'checked';\r\n              //IE6, IE7  propertychange ?\r\n              if(ie) { ev += ' click'; }\r\n            break;\r\n            case 'radio':\r\n              attr = 'checked';\r\n              if(ie) { ev += ' click'; }\r\n              update = function(val) {\r\n                comp.checked = comp.value === val + '';\r\n              };\r\n              isSetDefaut = comp.checked;\r\n            break;\r\n            default:\r\n              if(!vm.$lazy){\r\n                if('oninput' in comp){\r\n                  ev += ' input';\r\n                }\r\n                //IE  input \r\n                if(ie) {\r\n                  ev += ' keyup propertychange cut';\r\n                }\r\n              }\r\n            break;\r\n          }\r\n        break;\r\n        case 'SELECT':\r\n          if(comp.multiple){\r\n            handler = function() {\r\n              var vals = [];\r\n              for(var i = 0, l = comp.options.length; i < l; i++){\r\n                if(comp.options[i].selected){ vals.push(comp.options[i].value) }\r\n              }\r\n              vm.$replace(keyPath, vals);\r\n            };\r\n            update = function(vals){\r\n              if(vals && vals.length){\r\n                for(var i = 0, l = comp.options.length; i < l; i++){\r\n                  comp.options[i].selected = vals.indexOf(comp.options[i].value) !== -1;\r\n                }\r\n              }\r\n            };\r\n          }\r\n          isSetDefaut = isSetDefaut && !hasToken(comp[value]);\r\n        break;\r\n      }\r\n\r\n      ev.split(/\\s+/g).forEach(function(e){\r\n        events.removeEvent(comp, e, callHandler);\r\n        events.addEvent(comp, e, callHandler);\r\n      });\r\n      // model \r\n      if(comp[value] && isSetDefaut){\r\n         handler();\r\n      }\r\n    }\r\n\r\n    this.update = update;\r\n  }\r\n};\r\n","\"use strict\";\n\n//\n\nvar eventBind = require('../event-bind.js');\nvar utils = require('../utils')\n\nmodule.exports = {\n  watch: false\n, sub: true\n, priority: -3 // b-model . \n, immediate: false // watch  immediate  false ,  update \n, link: function() {\n    var dir = this;\n    if(this.subType){\n      // be-on-click \n      eventBind.addEvent(this.el, this.subType, function() {\n        dir.vm.$get(dir.path)\n      })\n    }else{\n      //link  watcher  immediate ,\n      // immediate  true  update \n      this.immediate = true;\n      //this.update(this.vm.$get(this.path))\n    }\n  }\n, update: function (events) {\n    var selector, eventType;\n    for(var name in events) {\n      selector = name.split(/\\s+/);\n      eventType = selector.shift();\n      selector = selector.join(' ');\n      eventBind.addEvent(this.el, eventType, callHandler(this, selector, events[name]));\n    }\n  }\n}\n\n//\n// IE8+\n// event.currentTarget  event.delegateTarget  jQuery \nfunction callHandler (dir, selector, callback) {\n  return function(e) {\n    var cur = e.target || e.srcElement;\n    var els = selector ? utils.toArray(dir.el.querySelectorAll(selector)) : [cur];\n    do{\n      if(els.indexOf(cur) >= 0) {\n        e.delegateTarget = cur;//\n        return callback.call(dir.vm, e)\n      }\n    }while(cur = cur.parentNode)\n  }\n}\n","\nvar utils = require('../utils')\n\nmodule.exports = {\n  watch: false\n, priority: -2 // ref  component \n, unLink: function() {\n    if(!utils.isArray(this.ref)) {\n      this.vm.$refs[this.path] = null;\n    }\n  }\n, link: function() {\n    var vm = this.vm\n    // `repeat`  `ref`  `viewmodel`\n    if(vm.__repeat){\n      if(!vm.$index) {\n        vm.$parent.$refs[this.path] = vm.__vmList;\n      }\n    }else{\n      vm.$refs[this.path] = this.el.bee || this.el;\n    }\n  }\n}\n","\"use strict\";\n\nvar doc = require('../env.js').document\n  , utils = require('../utils.js')\n  , scope = require('../scope')\n  ;\n\n//\nvar arrayMethods = ['splice', 'push', 'pop', 'shift', 'unshift', 'sort', 'reverse'];\n\nmodule.exports = {\n  priority: 1000\n, anchor: true\n, terminal: true\n, unLink: function(){\n    this.vmList.forEach(function(vm){\n      vm.$destroy()\n    })\n  }\n, link: function() {\n    var Bee = require('../bee')\n\n    this.trackId = this.el.getAttribute('track-by')\n    this.el.removeAttribute('track-by')\n\n    // repeat \n    // `directives, components, filters` \n    this.cstr = Bee.extend({}, this.vm.constructor)\n\n    //\n    this.cstr.defaults = {};\n\n    this.curArr = [];\n    this.vmList = [];// VM list\n\n    if(this.el.content) {\n      this.frag = this.el.content;\n      this.isRange = true\n    }else{\n      this.frag = this.el;\n    }\n    this.el.parentNode.removeChild(this.el);\n  }\n, update: function(items) {\n    var curArr = this.curArr;\n    var parentNode = this.anchors.end.parentNode;\n    var that = this, vmList = this.vmList;\n    var trackId = this.trackId;\n\n    //TODO \n    var arrs = []; //repeat \n\n    if(utils.isArray(items)) {\n      //  repeat \n      this.listPath = this.summary.paths.filter(function(path) {\n        return !utils.isFunction(that.vm.$get(path))\n      });\n\n      //\n      arrDiff(curArr, items, trackId).forEach(function(item) {\n        var pos = indexByTrackId(item, curArr, trackId)\n        curArr.splice(pos, 1)\n\n        if(that.isRange) {\n          getNodesByIndex(that, pos).forEach(function(node) {\n            parentNode.removeChild(node)\n          })\n        }else{\n          parentNode.removeChild(vmList[pos].$el)\n        }\n        vmList[pos].$destroy()\n        vmList.splice(pos, 1)\n      })\n\n      items.forEach(function(item, i) {\n        var pos = indexByTrackId(item, items, trackId, i)\n          , oldPos = indexByTrackId(item, curArr, trackId, i)\n          , vm, el, anchor\n          ;\n\n        //\n        if(oldPos < 0) {\n\n          el = this.frag.cloneNode(true)\n\n          if(this.isRange) {\n            anchor = doc.createComment('')\n            el.childNodes.length ? el.insertBefore(anchor, el.childNodes[0]) : el.appendChild(anchor)\n          }\n\n          vm = new this.cstr(el, {\n            $data: item,\n            $index: pos,\n            $root: this.vm.$root,\n            $parent: this.vm,\n            $context: this.vm.$context,\n            _assignments: this.summary.assignments,\n            __repeat: true,\n            __anchor: anchor,\n            __vmList: this.vmList\n          });\n\n          parentNode.insertBefore(vm.$el, getAnchor(that, pos))\n          vmList.splice(pos, 0, vm);\n          curArr.splice(pos, 0, item)\n\n          // `_relativePath`, \n          //,  vm  update , .\n          vm._relativePath = this.listPath;\n        }else {\n\n          //\n          if (pos !== oldPos) {\n\n            parentNode.insertBefore(getElByIndex(that, oldPos), getAnchor(that, pos))\n            parentNode.insertBefore(getElByIndex(that, pos), getAnchor(that, oldPos + 1))\n\n            vmList[oldPos] = [vmList[pos], vmList[pos] = vmList[oldPos]][0]\n            curArr[oldPos] = [curArr[pos], curArr[pos] = curArr[oldPos]][0]\n            vmList[pos].$index = pos\n            vmList[pos].$update('$index')\n          }\n        }\n      }.bind(this))\n\n      //\n      vmList.forEach(function(vm, i) {\n        vm.$index = i\n        vm.$el.$index = i\n        vm.$update('$index', false)\n      });\n\n      this.listPath.forEach(function(localKey) {\n        var local = that.vm.$get(localKey)\n        utils.isArray(local) && arrs.push(local)\n      })\n      arrs.push(items)\n      arrs.forEach(function(local) {\n        var dirs = local.__dirs__;\n\n        if(!dirs){\n          //\n          utils.extend(local, {\n            $set: function(i, item) {\n              local.splice(i, 1, utils.isObject(item) ? utils.extend({}, local[i], item) : item)\n            },\n            $replace: function(i, item) {\n              local.splice(i, 1, item)\n            },\n            $remove: function(i) {\n              local.splice(i, 1);\n            }\n          });\n          arrayMethods.forEach(function(method) {\n            local[method] = utils.afterFn(local[method], function() {\n              dirs.forEach(function(dir) {\n                dir.listPath.forEach(function(path) {\n                  var reformed = scope.reformScope(dir.vm, path)\n                  reformed.vm.$update(reformed.path)\n                })\n              })\n            })\n          });\n          dirs = local.__dirs__  = [];\n        }\n        //\n        //TODO \n        if(dirs.indexOf(that) === -1) {\n          dirs.push(that)\n        }\n      })\n\n    }else{\n      //TODO \n    }\n  }\n};\n\nfunction getAnchor(dir, index) {\n  var vm = dir.vmList[index]\n  return vm ? ( dir.isRange ? vm.__anchor : vm.$el ) : dir.anchors.end\n}\n\n//\nfunction getNodesByIndex(dir, index) {\n  var vmList = dir.vmList\n    , anchor = vmList[index].__anchor\n    , next = vmList[index + 1]\n    ;\n  return [anchor].concat(dir.getNodes(anchor, next && next.__anchor))\n}\n\nfunction getElByIndex (dir, index) {\n  var frag = doc.createDocumentFragment()\n  if(dir.isRange) {\n    getNodesByIndex(dir, index).forEach(function(node) {\n      frag.appendChild(node)\n    })\n  }else{\n    frag.appendChild(dir.vmList[index].$el)\n  }\n  return frag\n}\n\nfunction arrDiff(arr1, arr2, trackId) {\n  var arr2Copy = arr2.slice();\n  return arr1.filter(function(el) {\n    var result, index = indexByTrackId(el, arr2Copy, trackId)\n    if(index < 0) {\n      result = true\n    }else{\n      arr2Copy.splice(index, 1)\n    }\n    return result\n  })\n}\n\nfunction indexByTrackId(item, list, trackId, startIndex) {\n  startIndex = startIndex || 0;\n  var index = list.indexOf(item, startIndex);\n  if(index === -1 && trackId){\n    for(var i = startIndex, item1; item1 = list[i]; i++) {\n      if(item[trackId] ===  item1[trackId] && !utils.isUndefined(item[trackId])){\n        index = i;\n        break;\n      }\n    }\n  }\n  return index;\n}\n","\"use strict\";\n\n//\nvar utils = require('../utils')\n\n// px \nvar pixelAttrs = [\n  'width','height','min-width', 'min-height', 'max-width', 'max-height',\n  'margin', 'margin-top', 'margin-right', 'margin-left', 'margin-bottom',\n  'padding', 'padding-top', 'padding-right', 'padding-bottom', 'padding-left',\n  'top', 'left', 'right', 'bottom'\n]\n\n// IE6, IE7  `el.style.getAttribute('cssText')`  `el.style.setAttribute('cssText')`  style \n\nmodule.exports = {\n  link: function() {\n    this.initStyle = this.el.style.getAttribute ? this.el.style.getAttribute('cssText') : this.el.getAttribute('style')\n  },\n  update: function(styles) {\n    var el = this.el;\n    var styleStr = this.initStyle ? this.initStyle.replace(/;?$/, ';') : '';\n    var dashKey, val;\n\n    if(typeof styles === 'string') {\n      styleStr += styles;\n    }else {\n      for (var key in styles) {\n        val = styles[key];\n\n        //marginTop -> margin-top. \n        dashKey = utils.camelToHyphen(key);\n\n        if (pixelAttrs.indexOf(dashKey) >= 0 && utils.isNumeric(val)) {\n          val += 'px';\n        }\n        if(!utils.isUndefined(val)){\n          styleStr += dashKey + ': ' + val + '; ';\n        }\n      }\n    }\n    if(el.style.setAttribute){\n      // IE\n      el.style.setAttribute('cssText', styleStr);\n    }else{\n      el.setAttribute('style', styleStr);\n    }\n  }\n};\n","\"use strict\";\n\nvar doc = require('./env.js').document\nvar utils = require('./utils')\n\nmodule.exports = {\n  ////nodelist  fragment \n  createContent: function createContent(tpl) {\n    var content = doc.createDocumentFragment();\n    var wraper;\n    var nodes = [];\n    if(utils.isObject(tpl)) {\n      if(tpl.nodeName && tpl.nodeType) {\n        //dom \n        content.appendChild(tpl);\n      }else if('length' in tpl){\n        //nodelist\n        nodes = tpl;\n      }\n    }else {\n      wraper = doc.createElement('div')\n      // IE8 .  component \n      wraper.innerHTML = (tpl + '').trim();\n      nodes = wraper.childNodes;\n    }\n    while(nodes[0]) {\n      content.appendChild(nodes[0])\n    }\n    return content;\n  },\n\n  //\n  getAttrs: function(el) {\n    var attributes = el.attributes;\n    var attrs = {};\n\n    for(var i = attributes.length - 1; i >= 0; i--) {\n      //\n      attrs[utils.hyphenToCamel(attributes[i].nodeName)] = attributes[i].value;\n    }\n\n    return attrs;\n  },\n\n  hasAttr: function(el, attrName) {\n    return el.hasAttribute ? el.hasAttribute(attrName) : !utils.isUndefined(el[attrName]);\n  }\n};\n","(function(root){\n  \"use strict\";\n\n  exports.root = root;\n  exports.document = root.document || require('jsdom').jsdom();\n\n})((function() {return this})());\n","/**\r\n * \r\n */\r\n\r\n\"use strict\";\r\n\r\nvar scope = require('./scope')\r\n\r\nvar operators = {\r\n  'unary': {\r\n    '+': function(v) { return +v; }\r\n  , '-': function(v) { return -v; }\r\n  , '!': function(v) { return !v; }\r\n\r\n  , '[': function(v){ return v; }\r\n  , '{': function(v){\r\n      var r = {};\r\n      for(var i = 0, l = v.length; i < l; i++) {\r\n        r[v[i][0]] = v[i][1];\r\n      }\r\n      return r;\r\n    }\r\n  , 'typeof': function(v){ return typeof v; }\r\n  , 'new': function(v){ return new v }\r\n  }\r\n\r\n, 'binary': {\r\n    '+': function(l, r) { return l + r; }\r\n  , '-': function(l, r) { return l - r; }\r\n  , '*': function(l, r) { return l * r; }\r\n  , '/': function(l, r) { return l / r; }\r\n  , '%': function(l, r) { return l % r; }\r\n  , '<': function(l, r) { return l < r; }\r\n  , '>': function(l, r) { return l > r; }\r\n  , '<=': function(l, r) { return l <= r; }\r\n  , '>=': function(l, r) { return l >= r; }\r\n  , '==': function(l, r) { return l == r; }\r\n  , '!=': function(l, r) { return l != r; }\r\n  , '===': function(l, r) { return l === r; }\r\n  , '!==': function(l, r) { return l !== r; }\r\n  , '&&': function(l, r) { return l && r; }\r\n  , '||': function(l, r) { return l || r; }\r\n  , ',': function(l, r) { return l, r; }\r\n\r\n  , '.': function(l, r) {\r\n      var prev = this.first;\r\n      // a[b].c \r\n      if(r && path && !(prev.arity === 'binary' && prev.value === '[')){\r\n        path = path + '.' + r;\r\n      }\r\n      return l[r];\r\n    }\r\n  , '[': function(l, r) {\r\n      if(typeof r !== 'undefined' && path){\r\n        path = path + '.' + r;\r\n      }\r\n      return l[r];\r\n    }\r\n\r\n    //TODO  this  root\r\n  , '(': function(l, r){ return l.apply(root, r) }\r\n    //filter. name|filter\r\n  , '|': function(l, r){ return callFilter(l, r, []) }\r\n  , 'new': function(l, r){\r\n      return l === Date ? new Function('return new Date(' + r.join(', ') + ')')() : new (Function.prototype.bind.apply(l, [null].concat(r)));\r\n    }\r\n\r\n  , 'in': function(l, r){\r\n      if(this.repeat) {\r\n        //repeat\r\n        return r;\r\n      }else{\r\n        return l in r;\r\n      }\r\n    }\r\n  , 'catchby': function(l, r) {\r\n      if(l['catch']) {\r\n        return l['catch'](r.bind(root))\r\n      }else{\r\n        summaryCall || console.error('catchby expect a promise')\r\n        return l;\r\n      }\r\n    }\r\n  }\r\n\r\n, 'ternary': {\r\n    '?': function(f, s, t) { return f ? s : t; }\r\n  , '(': function(f, s, t) { return f[s].apply(f, t) }\r\n\r\n    //filter. name | filter : arg2 : arg3\r\n  , '|': function(f, s, t){ return callFilter(f, s, t) }\r\n  }\r\n};\r\n\r\nfunction callFilter(arg, filter, args) {\r\n  if(arg && arg.then) {\r\n    return arg.then(function(data) {\r\n      return filter.apply(root, [data].concat(args))\r\n    });\r\n  }else{\r\n    return filter.apply(root, [arg].concat(args))\r\n  }\r\n}\r\n\r\nvar argName = ['first', 'second', 'third']\r\n  , context, summary, summaryCall\r\n  , path\r\n  , self\r\n  , root\r\n  ;\r\n\r\n// ast\r\nvar evaluate = function(tree) {\r\n  var arity = tree.arity\r\n    , value = tree.value\r\n    , args = []\r\n    , n = 0\r\n    , arg\r\n    , res\r\n    ;\r\n\r\n  //\r\n  for(; n < 3; n++){\r\n    arg = tree[argName[n]];\r\n    if(arg){\r\n      if(Array.isArray(arg)){\r\n        args[n] = [];\r\n        for(var i = 0, l = arg.length; i < l; i++){\r\n          args[n].push(typeof arg[i].key === 'undefined' ?\r\n            evaluate(arg[i]) : [arg[i].key, evaluate(arg[i])]);\r\n        }\r\n      }else{\r\n        args[n] = evaluate(arg);\r\n      }\r\n    }\r\n  }\r\n\r\n  if(arity !== 'literal') {\r\n    if(path && value !== '.' && value !== '[') {\r\n      summary.paths[path] = true;\r\n    }\r\n    if(arity === 'name') {\r\n      path = value;\r\n    }\r\n  }\r\n\r\n  switch(arity){\r\n    case 'unary':\r\n    case 'binary':\r\n    case 'ternary':\r\n      try{\r\n        res = getOperator(arity, value).apply(tree, args);\r\n      }catch(e){\r\n        !summaryCall && value == '(' && console.error(e);\r\n      }\r\n    break;\r\n    case 'literal':\r\n      res = value;\r\n    break;\r\n    case 'repeat':\r\n      summary.assignments[value] = true;\r\n    break;\r\n    case 'name':\r\n      res = getValue(value, context.locals);\r\n    break;\r\n    case 'filter':\r\n      summary.filters[value] = true;\r\n      res = context.filters[value];\r\n    break;\r\n    case 'this':\r\n      res = context.locals;\r\n    break;\r\n  }\r\n  return res;\r\n};\r\n\r\nfunction getOperator(arity, value){\r\n  return operators[arity][value] || function() { return; }\r\n}\r\n\r\nfunction reset(scope, that) {\r\n  summaryCall = true;\r\n  if(scope) {\r\n    root = scope.$root;\r\n    summaryCall = false;\r\n    context = {locals: scope || {}, filters: scope.constructor.filters || {}};\r\n  }else{\r\n    context = {filters: {}, locals: {}};\r\n  }\r\n  if(that){\r\n    self = that;\r\n  }\r\n\r\n  summary = {filters: {}, paths: {}, assignments: {}};\r\n  path = '';\r\n}\r\n\r\n//\r\nvar getValue = function(key, vm) {\r\n  var reformed = scope.reformScope(vm, key)\r\n  return reformed.vm[reformed.path]\r\n}\r\n\r\n//\r\n//tree: parser  ast\r\n//scope \r\nexports.eval = function(tree, scope, that) {\r\n  reset(scope || {}, that);\r\n\r\n  return evaluate(tree);\r\n};\r\n\r\n//\r\n//return: {filters:[], paths: [], assignments: []}\r\nexports.summary = function(tree) {\r\n  reset();\r\n\r\n  evaluate(tree);\r\n\r\n  if(path) {\r\n    summary.paths[path] = true;\r\n  }\r\n  for(var key in summary) {\r\n    summary[key] = Object.keys(summary[key]);\r\n  }\r\n  return summary;\r\n};\r\n","\"use strict\";\n\nexports.addEvent = function addEvent(el, event, handler) {\n  if(el.addEventListener) {\n    el.addEventListener(event, handler, false);\n  }else{\n    el.attachEvent('on' + event, handler);\n  }\n}\n\nexports.removeEvent = function removeEvent(el, event, handler) {\n  if(el.removeEventListener) {\n    el.removeEventListener(event, handler);\n  }else{\n    el.detachEvent('on' + event, handler);\n  }\n}","\"use strict\";\n//Javascript expression parser modified form Crockford's TDOP parser\nvar create = Object.create || function (o) {\n\tfunction F() {}\n\tF.prototype = o;\n\treturn new F();\n};\n\nvar source;\n\nvar error = function (message, t) {\n\tt = t || this;\n  var msg = message += \" But found '\" + t.value + \"'\" + (t.from ? \" at \" + t.from : \"\") + \" in '\" + source + \"'\";\n  var e = new Error(msg);\n\te.name = t.name = \"SyntaxError\";\n\tt.message = message;\n  throw e;\n};\n\nvar tokenize = function (code, prefix, suffix) {\n\tvar c; // The current character.\n\tvar from; // The index of the start of the token.\n\tvar i = 0; // The index of the current character.\n\tvar length = code.length;\n\tvar n; // The number value.\n\tvar q; // The quote character.\n\tvar str; // The string value.\n\n\tvar result = []; // An array to hold the results.\n\n\t// Make a token object.\n\tvar make = function (type, value) {\n\t\treturn {\n\t\t\ttype : type,\n\t\t\tvalue : value,\n\t\t\tfrom : from,\n\t\t\tto : i\n\t\t};\n\t};\n\n\t// Begin tokenization. If the source string is empty, return nothing.\n\tif (!code) {\n\t\treturn;\n\t}\n\n\t// Loop through code text, one character at a time.\n\tc = code.charAt(i);\n\twhile (c) {\n\t\tfrom = i;\n\n\t\tif (c <= ' ') { // Ignore whitespace.\n\t\t\ti += 1;\n\t\t\tc = code.charAt(i);\n\t\t} else if ((c >= 'a' && c <= 'z') || (c >= 'A' && c <= 'Z') || c === '$' || c === '_') { // name.\n\t\t\tstr = c;\n\t\t\ti += 1;\n\t\t\tfor (; ; ) {\n\t\t\t\tc = code.charAt(i);\n\t\t\t\tif ((c >= 'a' && c <= 'z') || (c >= 'A' && c <= 'Z') ||\n\t\t\t\t\t(c >= '0' && c <= '9') || c === '_') {\n\t\t\t\t\tstr += c;\n\t\t\t\t\ti += 1;\n\t\t\t\t} else {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\tresult.push(make('name', str));\n\t\t} else if (c >= '0' && c <= '9') {\n\t\t\t// number.\n\n\t\t\t// A number cannot start with a decimal point. It must start with a digit,\n\t\t\t// possibly '0'.\n\t\t\tstr = c;\n\t\t\ti += 1;\n\n\t\t\t// Look for more digits.\n\t\t\tfor (; ; ) {\n\t\t\t\tc = code.charAt(i);\n\t\t\t\tif (c < '0' || c > '9') {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\ti += 1;\n\t\t\t\tstr += c;\n\t\t\t}\n\n\t\t\t// Look for a decimal fraction part.\n\t\t\tif (c === '.') {\n\t\t\t\ti += 1;\n\t\t\t\tstr += c;\n\t\t\t\tfor (; ; ) {\n\t\t\t\t\tc = code.charAt(i);\n\t\t\t\t\tif (c < '0' || c > '9') {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\ti += 1;\n\t\t\t\t\tstr += c;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Look for an exponent part.\n\t\t\tif (c === 'e' || c === 'E') {\n\t\t\t\ti += 1;\n\t\t\t\tstr += c;\n\t\t\t\tc = code.charAt(i);\n\t\t\t\tif (c === '-' || c === '+') {\n\t\t\t\t\ti += 1;\n\t\t\t\t\tstr += c;\n\t\t\t\t\tc = code.charAt(i);\n\t\t\t\t}\n\t\t\t\tif (c < '0' || c > '9') {\n\t\t\t\t\terror(\"Bad exponent\", make('number', str));\n\t\t\t\t}\n\t\t\t\tdo {\n\t\t\t\t\ti += 1;\n\t\t\t\t\tstr += c;\n\t\t\t\t\tc = code.charAt(i);\n\t\t\t\t} while (c >= '0' && c <= '9');\n\t\t\t}\n\n\t\t\t// Make sure the next character is not a letter.\n\n\t\t\tif (c >= 'a' && c <= 'z') {\n\t\t\t\tstr += c;\n\t\t\t\ti += 1;\n\t\t\t\terror(\"Bad number\", make('number', str));\n\t\t\t}\n\n\t\t\t// Convert the string value to a number. If it is finite, then it is a good\n\t\t\t// token.\n\n\t\t\tn = +str;\n\t\t\tif (isFinite(n)) {\n\t\t\t\tresult.push(make('number', n));\n\t\t\t} else {\n\t\t\t\terror(\"Bad number\", make('number', str));\n\t\t\t}\n\n\t\t\t// string\n\n\t\t} else if (c === '\\'' || c === '\"') {\n\t\t\tstr = '';\n\t\t\tq = c;\n\t\t\ti += 1;\n\t\t\tfor (; ; ) {\n\t\t\t\tc = code.charAt(i);\n\t\t\t\tif (c < ' ') {\n\t\t\t\t\tmake('string', str);\n\t\t\t\t\terror(c === '\\n' || c === '\\r' || c === '' ?\n\t\t\t\t\t\t\"Unterminated string.\" :\n\t\t\t\t\t\t\"Control character in string.\", make('', str));\n\t\t\t\t}\n\n\t\t\t\t// Look for the closing quote.\n\n\t\t\t\tif (c === q) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\t// Look for escapement.\n\n\t\t\t\tif (c === '\\\\') {\n\t\t\t\t\ti += 1;\n\t\t\t\t\tif (i >= length) {\n\t\t\t\t\t\terror(\"Unterminated string\", make('string', str));\n\t\t\t\t\t}\n\t\t\t\t\tc = code.charAt(i);\n\t\t\t\t\tswitch (c) {\n\t\t\t\t\tcase 'b':\n\t\t\t\t\t\tc = '\\b';\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'f':\n\t\t\t\t\t\tc = '\\f';\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'n':\n\t\t\t\t\t\tc = '\\n';\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'r':\n\t\t\t\t\t\tc = '\\r';\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 't':\n\t\t\t\t\t\tc = '\\t';\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'u':\n\t\t\t\t\t\tif (i >= length) {\n\t\t\t\t\t\t\terror(\"Unterminated string\", make('string', str));\n\t\t\t\t\t\t}\n\t\t\t\t\t\tc = parseInt(code.substr(i + 1, 4), 16);\n\t\t\t\t\t\tif (!isFinite(c) || c < 0) {\n\t\t\t\t\t\t\terror(\"Unterminated string\", make('string', str));\n\t\t\t\t\t\t}\n\t\t\t\t\t\tc = String.fromCharCode(c);\n\t\t\t\t\t\ti += 4;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tstr += c;\n\t\t\t\ti += 1;\n\t\t\t}\n\t\t\ti += 1;\n\t\t\tresult.push(make('string', str));\n\t\t\tc = code.charAt(i);\n\n\t\t\t// combining\n\n\t\t} else if (prefix.indexOf(c) >= 0) {\n\t\t\tstr = c;\n\t\t\ti += 1;\n\t\t\twhile (true) {\n\t\t\t\tc = code.charAt(i);\n\t\t\t\tif (i >= length || suffix.indexOf(c) < 0) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tstr += c;\n\t\t\t\ti += 1;\n\t\t\t}\n\t\t\tresult.push(make('operator', str));\n\n\t\t\t// single-character operator\n\n\t\t} else {\n\t\t\ti += 1;\n\t\t\tresult.push(make('operator', c));\n\t\t\tc = code.charAt(i);\n\t\t}\n\t}\n\treturn result;\n};\n\nvar make_parse = function (vars) {\n\tvars = vars || {};//\n\tvar symbol_table = {};\n\tvar token;\n\tvar tokens;\n\tvar token_nr;\n\tvar context;\n\n\tvar itself = function () {\n\t\treturn this;\n\t};\n\n\tvar find = function (n) {\n\t\tn.nud = itself;\n\t\tn.led = null;\n\t\tn.std = null;\n\t\tn.lbp = 0;\n\t\treturn n;\n\t};\n\n\tvar advance = function (id) {\n\t\tvar a, o, t, v;\n\t\tif (id && token.id !== id) {\n\t\t\terror(\"Expected '\" + id + \"'.\", token);\n\t\t}\n\t\tif (token_nr >= tokens.length) {\n\t\t\ttoken = symbol_table[\"(end)\"];\n\t\t\treturn;\n\t\t}\n\t\tt = tokens[token_nr];\n\t\ttoken_nr += 1;\n\t\tv = t.value;\n\t\ta = t.type;\n\t\tif ((a === \"operator\" || a !== 'string') && v in symbol_table) {\n\t\t\t//true, false \n\t\t\to = symbol_table[v];\n\t\t\tif (!o) {\n\t\t\t\terror(\"Unknown operator.\", t);\n\t\t\t}\n\t\t} else if (a === \"name\") {\n\t\t\to = find(t);\n\t\t} else if (a === \"string\" || a === \"number\" || a === \"regexp\") {\n\t\t\to = symbol_table[\"(literal)\"];\n\t\t\ta = \"literal\";\n\t\t} else {\n\t\t\terror(\"Unexpected token.\", t);\n\t\t}\n\t\ttoken = create(o);\n\t\ttoken.from = t.from;\n\t\ttoken.to = t.to;\n\t\ttoken.value = v;\n\t\ttoken.arity = a;\n\t\treturn token;\n\t};\n\n  //\n  //rbp: right binding power \n\tvar expression = function (rbp) {\n\t\tvar left;\n\t\tvar t = token;\n\t\tadvance();\n\t\tleft = t.nud();\n\t\twhile (rbp < token.lbp) {\n\t\t\tt = token;\n\t\t\tadvance();\n\t\t\tleft = t.led(left);\n\t\t}\n\t\treturn left;\n\t};\n\n\tvar original_symbol = {\n\t\tnud : function () {\n\t\t\terror(\"Undefined.\", this);\n\t\t},\n\t\tled : function (left) {\n\t\t\terror(\"Missing operator.\", this);\n\t\t}\n\t};\n\n\tvar symbol = function (id, bp) {\n\t\tvar s = symbol_table[id];\n\t\tbp = bp || 0;\n\t\tif (s) {\n\t\t\tif (bp >= s.lbp) {\n\t\t\t\ts.lbp = bp;\n\t\t\t}\n\t\t} else {\n\t\t\ts = create(original_symbol);\n\t\t\ts.id = s.value = id;\n\t\t\ts.lbp = bp;\n\t\t\tsymbol_table[id] = s;\n\t\t}\n\t\treturn s;\n\t};\n\n\tvar constant = function (s, v, a) {\n\t\tvar x = symbol(s);\n\t\tx.nud = function () {\n\t\t\tthis.value = symbol_table[this.id].value;\n\t\t\tthis.arity = \"literal\";\n\t\t\treturn this;\n\t\t};\n\t\tx.value = v;\n\t\treturn x;\n\t};\n\n\tvar infix = function (id, bp, led) {\n\t\tvar s = symbol(id, bp);\n\t\ts.led = led || function (left) {\n\t\t\tthis.first = left;\n\t\t\tthis.second = expression(bp);\n\t\t\tthis.arity = \"binary\";\n\t\t\treturn this;\n\t\t};\n\t\treturn s;\n\t};\n\n\tvar infixr = function (id, bp, led) {\n\t\tvar s = symbol(id, bp);\n\t\ts.led = led || function (left) {\n\t\t\tthis.first = left;\n\t\t\tthis.second = expression(bp - 1);\n\t\t\tthis.arity = \"binary\";\n\t\t\treturn this;\n\t\t};\n\t\treturn s;\n\t};\n\n\tvar prefix = function (id, nud) {\n\t\tvar s = symbol(id);\n\t\ts.nud = nud || function () {\n\t\t\tthis.first = expression(70);\n\t\t\tthis.arity = \"unary\";\n\t\t\treturn this;\n\t\t};\n\t\treturn s;\n\t};\n\n\tsymbol(\"(end)\");\n\tsymbol(\"(name)\");\n\tsymbol(\":\");\n\tsymbol(\")\");\n\tsymbol(\"]\");\n\tsymbol(\"}\");\n\tsymbol(\",\");\n\n\tconstant(\"true\", true);\n\tconstant(\"false\", false);\n\tconstant(\"null\", null);\n\tconstant(\"undefined\");\n\n\tconstant(\"Math\", Math);\n\tconstant(\"Date\", Date);\n\tfor(var v in vars) {\n\t\tconstant(v, vars[v]);\n\t}\n\n\tsymbol(\"(literal)\").nud = itself;\n\n\tsymbol(\"this\").nud = function () {\n\t  this.arity = \"this\";\n\t  return this;\n\t};\n\n\t//Operator Precedence:\n\t//https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Operator_Precedence\n\n  //infix(',', 1);\n\tinfix(\"?\", 20, function (left) {\n\t\tthis.first = left;\n\t\tthis.second = expression(0);\n\t\tadvance(\":\");\n\t\tthis.third = expression(0);\n\t\tthis.arity = \"ternary\";\n\t\treturn this;\n\t});\n\n\tinfixr(\"&&\", 31);\n\tinfixr(\"||\", 30);\n\n\tinfixr(\"===\", 40);\n\tinfixr(\"!==\", 40);\n\n\tinfixr(\"==\", 40);\n\tinfixr(\"!=\", 40);\n\n\tinfixr(\"<\", 40);\n\tinfixr(\"<=\", 40);\n\tinfixr(\">\", 40);\n\tinfixr(\">=\", 40);\n\n\tinfix(\"in\", 45, function (left) {\n\t\tthis.first = left;\n\t\tthis.second = expression(0);\n\t\tthis.arity = \"binary\";\n\t\tif (context === 'repeat') {\n\t\t\t// `in` at repeat block\n\t\t\tleft.arity = 'repeat';\n\t\t\tthis.repeat = true;\n\t\t}\n\t\treturn this;\n\t});\n\n\tinfix(\"+\", 50);\n\tinfix(\"-\", 50);\n\n\tinfix(\"*\", 60);\n\tinfix(\"/\", 60);\n\tinfix(\"%\", 60);\n\n\tinfix(\"(\", 75, function (left) {\n\t\tvar a = [];\n\t\tif (left.id === \".\" || left.id === \"[\") {\n\t\t\tthis.arity = \"ternary\";\n\t\t\tthis.first = left.first;\n\t\t\tthis.second = left.second;\n\t\t\tthis.third = a;\n\t\t} else {\n\t\t\tthis.arity = \"binary\";\n\t\t\tthis.first = left;\n\t\t\tthis.second = a;\n\t\t\tif ((left.arity !== \"unary\" || left.id !== \"function\") &&\n\t\t\t\tleft.arity !== \"name\" && left.arity !== \"literal\" && left.id !== \"(\" &&\n\t\t\t\tleft.id !== \"&&\" && left.id !== \"||\" && left.id !== \"?\") {\n\t\t\t\terror(\"Expected a variable name.\", left);\n\t\t\t}\n\t\t}\n\t\tif (token.id !== \")\") {\n\t\t\twhile (true) {\n\t\t\t\ta.push(expression(1));\n\t\t\t\tif (token.id !== \",\") {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tadvance(\",\");\n\t\t\t}\n\t\t}\n\t\tadvance(\")\");\n\t\treturn this;\n\t});\n\n\tinfix(\".\", 80, function (left) {\n\t\tthis.first = left;\n\t\tif (token.arity !== \"name\") {\n\t\t\terror(\"Expected a property name.\", token);\n\t\t}\n\t\ttoken.arity = \"literal\";\n\t\tthis.second = token;\n\t\tthis.arity = \"binary\";\n\t\tadvance();\n\t\treturn this;\n\t});\n\n\tinfix(\"[\", 60, function (left) {\n\t\tthis.first = left;\n\t\tthis.second = expression(0);\n\t\tthis.arity = \"binary\";\n\t\tadvance(\"]\");\n\t\treturn this;\n\t});\n\n\t//filter\n\tinfix(\"|\", 10, function (left) {\n\t\tvar a;\n\t\tthis.first = left;\n\t\ttoken.arity = 'filter';\n\t\tthis.second = expression(10);\n\t\tthis.arity = 'binary';\n\t\tif (token.id === ':') {\n\t\t\tthis.arity = 'ternary';\n\t\t\tthis.third = a = [];\n\t\t\twhile (true) {\n\t\t\t\tadvance(':');\n\t\t\t\ta.push(expression(10));\n\t\t\t\tif (token.id !== \":\") {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn this;\n\t});\n  infix('catchby', 10);\n\n\tprefix(\"!\");\n\tprefix(\"-\");\n\tprefix(\"typeof\");\n\n\tprefix(\"(\", function () {\n\t\tvar e = expression(0);\n\t\tadvance(\")\");\n\t\treturn e;\n\t});\n\n\tprefix(\"[\", function () {\n\t\tvar a = [];\n\t\tif (token.id !== \"]\") {\n\t\t\twhile (true) {\n\t\t\t\ta.push(expression(1));\n\t\t\t\tif (token.id !== \",\") {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tadvance(\",\");\n\t\t\t}\n\t\t}\n\t\tadvance(\"]\");\n\t\tthis.first = a;\n\t\tthis.arity = \"unary\";\n\t\treturn this;\n\t});\n\n\tprefix(\"{\", function () {\n\t\tvar a = [],\tn, v;\n\t\tif (token.id !== \"}\") {\n\t\t\twhile (true) {\n\t\t\t\tn = token;\n\t\t\t\tif (n.arity !== \"name\" && n.arity !== \"literal\") {\n\t\t\t\t\terror(\"Bad property name: \", token);\n\t\t\t\t}\n\t\t\t\tadvance();\n\t\t\t\tadvance(\":\");\n\t\t\t\tv = expression(1);\n\t\t\t\tv.key = n.value;\n\t\t\t\ta.push(v);\n\t\t\t\tif (token.id !== \",\") {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tadvance(\",\");\n\t\t\t}\n\t\t}\n\t\tadvance(\"}\");\n\t\tthis.first = a;\n\t\tthis.arity = \"unary\";\n\t\treturn this;\n\t});\n\n\tprefix('new', function () {\n\t\tvar a = [];\n\t\tthis.first = expression(79);\n\t\tif(token.id === '(') {\n\t\t\tadvance(\"(\");\n\t\t\tthis.arity = 'binary';\n\t\t\tthis.second = a;\n\t\t\twhile (true) {\n\t\t\t\ta.push(expression(1));\n\t\t\t\tif (token.id !== \",\") {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tadvance(\",\");\n\t\t\t}\n\t\t\tadvance(\")\");\n\t\t}else{\n\t\t\tthis.arity = \"unary\";\n\t\t}\n\t\treturn this;\n\t});\n\n\t//_source: \n\t//_context: \n\treturn function (_source, _context) {\n    source = _source;\n\t\ttokens = tokenize(_source, '=<>!+-*&|/%^', '=<>&|');\n\t\ttoken_nr = 0;\n\t\tcontext = _context;\n\t\tadvance();\n\t\tvar s = expression(0);\n\t\tadvance(\"(end)\");\n\t\treturn s;\n\t};\n};\n\nexports.parse = make_parse();\n","\"use strict\";\n\nvar utils = require('./utils');\n\n// vm  vm\nvar reformScope = function (vm, path) {\n  var paths = utils.parseKeyPath(path);\n  var cur = vm, local = paths[0];\n  var ass, curVm = cur;\n\n  while(cur) {\n    curVm = cur;\n    ass = cur._assignments;\n    if( cur.__repeat) {\n      if (ass && ass.length) {\n        //  repeat \n        if (local === '$index' || local === '$parent') {\n          break;\n        } else if (local === ass[0]) {\n          //key\n          if (paths.length === 1) {\n            paths[0] = '$data';\n          } else {\n            paths.shift()\n          }\n          break;\n        }\n      } else {\n        // repeat\n        if (path in cur) {\n          break;\n        }\n      }\n    }\n    cur = cur.$parent;\n  }\n\n  return { vm: curVm, path: paths.join('.') }\n};\n\n\nexports.reformScope = reformScope;\n","var tokenReg = /{{({(.+?)}|.+?)}}/g;\n\n//\nfunction hasToken(str) {\n  tokenReg.lastIndex = 0;\n  return str && tokenReg.test(str);\n}\n\nfunction parseToken(value) {\n  var tokens = []\n    , textMap = []\n    , start = 0\n    , val, token\n    ;\n\n  tokenReg.lastIndex = 0;\n\n  while((val = tokenReg.exec(value))){\n    if(tokenReg.lastIndex - start > val[0].length){\n      textMap.push(value.slice(start, tokenReg.lastIndex - val[0].length));\n    }\n\n    token = {\n      escape: !val[2]\n    , path: (val[2] || val[1]).trim()\n    , position: textMap.length\n    , textMap: textMap\n    };\n\n    tokens.push(token);\n\n    //(), , \n    textMap.push(val[0]);\n\n    start = tokenReg.lastIndex;\n  }\n\n  if(value.length > start){\n    textMap.push(value.slice(start, value.length));\n  }\n\n  tokens.textMap = textMap;\n\n  return tokens;\n}\n\nexports.hasToken = hasToken;\n\nexports.parseToken = parseToken;\n","\"use strict\";\n\n//utils\n//---\n\nvar doc = require('./env.js').document;\n\nvar keyPathReg = /(?:\\.|\\[)/g\n  , bra = /\\]/g\n  ;\n\n// keyPath \n//path.key, path[key] --> ['path', 'key']\nfunction parseKeyPath(keyPath){\n  return keyPath.replace(bra, '').split(keyPathReg);\n}\n\n/**\n * \n * @static\n * @param {Boolean} [deep=false] \n * @param {Object} target \n * @param {Object} [object...] \n * @returns {Object}  target \n */\nfunction extend(/* deep, target, object... */) {\n  var options\n    , name, src, copy, copyIsArray, clone\n    , target = arguments[0] || {}\n    , i = 1\n    , length = arguments.length\n    , deep = false\n    ;\n\n  // Handle a deep copy situation\n  if (typeof target === \"boolean\") {\n    deep = target;\n\n    // skip the boolean and the target\n    target = arguments[ i ] || {};\n    i++;\n  }\n\n  // Handle case when target is a string or something (possible in deep copy)\n  if (typeof target !== \"object\" && !utils.isFunction(target)) {\n    target = {};\n  }\n\n  for ( ; i < length; i++ ) {\n    // Only deal with non-null/undefined values\n    if ( (options = arguments[ i ]) != null ) {\n      // Extend the base object\n      for ( name in options ) {\n        //android 2.3 browser can enum the prototype of constructor...\n        if(name !== 'prototype'){\n          src = target[ name ];\n          copy = options[ name ];\n\n\n          // Recurse if we're merging plain objects or arrays\n          if ( deep && copy && ( utils.isPlainObject(copy) || (copyIsArray = utils.isArray(copy)) ) ) {\n\n            // Prevent never-ending loop\n            if ( target === copy ) {\n              continue;\n            }\n            if ( copyIsArray ) {\n              copyIsArray = false;\n              clone = src && utils.isArray(src) ? src : [];\n\n            } else {\n              clone = src && utils.isPlainObject(src) ? src : {};\n            }\n\n            // Never move original objects, clone them\n            target[ name ] = extend( deep, clone, copy);\n\n            // Don't bring in undefined values\n          } else if ( !utils.isUndefined(copy) && typeof target !== 'string') {\n            //,  firefox \n            target[name] = copy;\n          }\n        }\n      }\n    }\n  }\n\n  // Return the modified object\n  return target;\n}\n\nvar create = Object.create || function (o) {\n  function F() {}\n  F.prototype = o;\n  return new F();\n};\n\nvar deepGet = function (keyStr, obj) {\n  var chain, cur = obj, key;\n  if(keyStr){\n    chain = parseKeyPath(keyStr);\n    for(var i = 0, l = chain.length; i < l; i++) {\n      key = chain[i];\n      if(cur){\n        cur = cur[key];\n      }else{\n        return;\n      }\n    }\n  }\n  return cur;\n}\n\n//html , .\n//\n//attr-name --> attrName\n//attr--name --> attr-name\nvar hyphensReg = /-(-?)([a-z])/ig;\nvar hyphenToCamel = function(attrName) {\n  return attrName.replace(hyphensReg, function(s, dash, char) {\n    return dash ? dash + char : char.toUpperCase();\n  })\n}\n\n//\nvar camelReg = /([A-Z])/g;\nvar camelToHyphen = function(key) {\n  return key.replace(camelReg, function (upperChar) {\n    return '-' + upperChar.toLowerCase();\n  })\n}\n\nvar utils = {\n  noop: function (){}\n, ie: (function(){\n    var undef,\n        v = 3,\n        div = doc.createElement('div'),\n        all = div.getElementsByTagName('i');\n\n    while (\n      div.innerHTML = '<!--[if gt IE ' + (++v) + ']><i></i><![endif]-->',\n      all[0]\n    );\n\n    return v > 4 ? v : undef;\n\n  }())\n\n, isObject: function (val) {\n    return typeof val === 'object' && val !== null;\n  }\n\n, isUndefined: function (val) {\n    return typeof val === 'undefined';\n  }\n\n, isFunction: function (val){\n    return typeof val === 'function';\n  }\n\n, isArray: function (val) {\n    if(utils.ie){\n      //IE 9  IE \n      return val && val.constructor + '' === Array + '';\n    }else{\n      return Array.isArray(val);\n    }\n  }\n, isNumeric: function(val) {\n    return !utils.isArray(val) && val - parseFloat(val) + 1 >= 0;\n  }\n  //\n, isPlainObject: function (o){\n    if (!o || ({}).toString.call(o) !== '[object Object]' || o.nodeType || o === o.window) {\n      return false;\n    }else{\n      return true;\n    }\n  }\n\n  //. oriFn , fn \n  // breakCheck , breakCheck \n, beforeFn: function (oriFn, fn, breakCheck) {\n    return function() {\n      var ret = fn.apply(this, arguments);\n      if(breakCheck && breakCheck.call(this, ret, arguments)){\n        return ret;\n      }\n      return oriFn.apply(this, arguments);\n    };\n  }\n\n, afterFn: function (oriFn, fn, breakCheck) {\n    return function() {\n      var ret = oriFn.apply(this, arguments);\n      if(breakCheck && breakCheck.call(this, ret, arguments)){\n        return ret;\n      }\n      fn.apply(this, arguments);\n      return ret;\n    }\n  }\n\n, parseKeyPath: parseKeyPath\n\n, deepSet: function (keyStr, value, obj) {\n    if(keyStr){\n      var chain = parseKeyPath(keyStr)\n        , cur = obj\n        ;\n      chain.forEach(function(key, i) {\n        if(i === chain.length - 1){\n          cur[key] = value;\n        }else{\n          if(cur && cur.hasOwnProperty(key)){\n            cur = cur[key];\n          }else{\n            cur[key] = {};\n            cur = cur[key];\n          }\n        }\n      });\n    }else{\n      extend(obj, value);\n    }\n    return obj;\n  }\n, extend: extend\n, create: create\n, toArray: function(arrLike) {\n    var arr = [];\n\n    try{\n      //IE 8  dom \n      arr = Array.prototype.slice.call(arrLike)\n    }catch (e){\n      for(var i = 0, l = arrLike.length; i < l; i++) {\n        arr[i] = arrLike[i]\n      }\n    }\n    return arr;\n  }\n, hyphenToCamel: hyphenToCamel\n, camelToHyphen: camelToHyphen\n};\n\nmodule.exports = utils;\n","\"use strict\";\n\nvar evaluate = require('./eval.js')\n  , utils = require('./utils.js')\n  , parse = require('./parse.js').parse\n  , reformScope = require('./scope').reformScope\n  ;\n\nvar summaryCache = {};\n\n/**\n *  directive  watcher\n * @param {Bee} vm  directive \n * @param {Directive} dir\n */\nfunction Watcher(vm, dir) {\n  var reformed, path, curVm = vm, watchers = [];\n  var summary = summaryCache[dir.path]\n\n  dir.watcher = this;\n\n  this.state = 1;\n  this.dir = dir;\n  this.vm = vm;\n  this.watchers = [];\n\n  this.val = NaN;\n\n  dir.parse();\n\n  if(!summary || summary._type !== dir.type){\n    summary = evaluate.summary(dir.ast);\n    summary._type = dir.type;\n    summaryCache[dir.path] = summary;\n  }\n  dir.summary = summary\n\n  // watcher \n  for(var i = 0, l = dir.summary.paths.length; i < l; i++) {\n    reformed = reformScope(vm, dir.summary.paths[i])\n    curVm = reformed.vm\n    path = reformed.path\n    if(dir.watch) {\n      curVm._watchers[path] = curVm._watchers[path] || [];\n      curVm._watchers[path].push(this);\n      watchers = curVm._watchers[path];\n    }else{\n      watchers = [this];\n    }\n    // key  watchers \n    this.watchers.push( watchers );\n  }\n\n  //\n  dir.immediate !== false && this.update();\n}\n\n// vm  watcher\nfunction unwatch (vm, exp, callback) {\n  var summary;\n  try {\n    summary = evaluate.summary(parse(exp))\n  }catch (e){\n    e.message = 'SyntaxError in \"' + exp + '\" | ' + e.message;\n    console.error(e);\n  }\n  summary.paths.forEach(function(path) {\n    var watchers = vm._watchers[path] || [], update;\n\n    for(var i = watchers.length - 1; i >= 0; i--){\n      update = watchers[i].dir.update;\n      if(update === callback || update._originFn === callback){\n        watchers[i].unwatch()\n      }\n    }\n  })\n}\n\nfunction addWatcher(dir) {\n  if(dir.path) {\n    return new Watcher(this, dir);\n  }\n}\n\nWatcher.unwatch = unwatch;\nWatcher.addWatcher = addWatcher;\n\n// keyPath  watchers\nWatcher.getWatchers = function getWatchers(vm, keyPath) {\n  var _watchers = vm._watchers, watchers = [];\n  var point;\n  for(var key in _watchers) {\n    point = key.charAt(keyPath.length);\n    if(key.indexOf(keyPath) === 0 && (point === '.')) {\n      watchers = watchers.concat(_watchers[key])\n    }\n  }\n  return watchers\n}\n\nfunction watcherUpdate (val) {\n  var oldValue = this.val;\n  this.val = val;\n  this.dir.update(val, oldValue);\n}\n\nutils.extend(Watcher.prototype, {\n  // view\n  update: function() {\n    var that = this\n      , newVal\n      ;\n\n    if(this._hide) {\n      this._needUpdate = true;\n      return;\n    }\n    newVal = this.dir.getValue(this.vm);\n\n    //\n    if(newVal !== this.val || utils.isObject(newVal)){\n      if(newVal && newVal.then) {\n        //a promise\n        newVal.then(function(val) {\n          watcherUpdate.call(that, val);\n        });\n      }else{\n        watcherUpdate.call(this, newVal);\n      }\n    }\n  },\n  //\n  unwatch: function() {\n    this.watchers.forEach(function(watchers) {\n      for(var i = watchers.length - 1; i >= 0; i--){\n        if(watchers[i] === this){\n          if(this.state){\n            watchers[i].dir.unLink();\n            this.state = 0;\n          }\n          watchers.splice(i, 1);\n        }\n      }\n    }.bind(this))\n    this.watchers = [];\n  }\n});\n\nmodule.exports = Watcher\n"],"sourceRoot":"./"}